{% extends 'base.html' %}
{% block title %}
    <title>Chat - {{ room_name }}</title>
{% endblock %}

{% load static %}

{% block content %}
<div id="content">
    <div class="card">
        <p class="subtitle">
            You are currently talking in {{room_name}}'s chat.
        </p>

        <div class="column is-6 is-offset-3">
            <div class="box">
                <div id="chat-messages" style="max-height: 300px; overflow-y: scroll;">{% for m in messages %}<b>{{ m.username }}</b>: {{ m.content }}<br>{% endfor %}</div>
            </div>

            <div class="field">
                <div class="control">
                    <input class="input" type="text" placeholder="Message" id="chat-message-input">
                </div>
            </div>

            <div class="field">
                <div class="control">
                    <a class="btn btn-primary" id="chat-message-submit">Submit</a>
                </div>
            </div>

            <small class="has-text-grey-light">Your username: {{ username }}</small>
        </div>
    </div>
</div>

{{ room_name|json_script:"json-roomname" }}
{{ username|json_script:"json-username" }}

<script src="{% static 'js/chat.js' %}" defer></script>
{% endblock %}
